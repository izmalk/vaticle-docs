= Open a session
:tabs-sync-option:
:experimental:

A session represents an active connection to a specific database on a TypeDB server,
and it can be of two types: `schema` and `data`.
The `schema` session type is specifically employed for xref:typeql::schema/define.adoc[Define] and
xref:typeql::schema/undefine.adoc[Undefine] queries.

This guide covers session control and best practices with Studio, Console, or one of the drivers.
Both Studio and Console provide automated session control, so you don't need to open and close sessions manually.
To open a session, you need to choose a session type and an existing database.

Make sure to create a new database
using instructions on the xref:manual::connecting/database.adoc[] page.

== Open a new session

To open a session to a database, you need to have a connection to the server and know the name of the database.

[tabs]
====
Studio::
+
--
Studio controls transactions automatically when you run a query.

You can select a session type for queries with a `schema`/`data` selector in the top toolbar:
image:manual::icons/session-schema.png[session type selector].
For the session type selector to be active, you need to connect Studio to TypeDB
and select a database from a drop-down list in the top toolbar.
--

Console::
+
--
Console controls sessions automatically.

You choose a session type when you open a xref:manual::connecting/transaction.adoc[transaction].
--
====

xref:drivers::overview.adoc[TypeDB drivers]
provide the most flexible approach to managing sessions via native API by manually opening them:

[tabs]
====
Rust::
+
--
.Open a session
[,rust]
----
let session = Session::new(databases.get("sample_db")?, SessionType::Schema)?;
----
--

Python::
+
--
.Open a session
[,python]
----
session = driver.session("sample_db", SessionType.SCHEMA)
----
--

Java::
+
--
.Open a session
[,java]
----
TypeDBSession session = driver.session("sample_db", TypeDBSession.Type.SCHEMA);
----
--

Node.js::
+
--
.Open a session
[,js]
----
let session = await driver.session("sample_db", SessionType.SCHEMA);
----
--

C++::
+
--
.Open a session
[,cpp]
----
auto session = driver.session("sample_db", TypeDB::SessionType::SCHEMA, options);
----
--
====

To see how to close a session, see <<_close_a_session,below>>.

After connecting to a server and opening a
xref:connecting/session.adoc[session], see how to xref:connecting/transaction.adoc[open a transaction].

[#_close_a_session]
== Close a session

Both Studio and Console manage sessions automatically.

For manual session control, use xref:drivers::overview.adoc[TypeDB drivers]:

[tabs]
====
Rust::
+
--
A session is automatically closed when the variable containing it is dropped from memory.

To explicitly close a session,
use the xref:drivers::rust/api-reference.adoc#_struct_Session_force_close__[force_close] method:

.Close a session
[,rust]
----
session.force_close();
----
--

Python::
+
--
Use a https://peps.python.org/pep-0343/[context manager] to close a session when it's longer needed,
or use the xref:drivers::python/api-reference.adoc#_TypeDBSession_close__[close] method to explicitly close a session:

.Close a session
[,python]
----
session.close()
----
--

Java::
+
--
Use the https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html[Try with resources] statement
to close a session when it's longer needed, or use the
xref:drivers::java/api-reference.adoc#_TypeDBSession_close__[close] method to explicitly close a session:

.Close a session
[,java]
----
session.close();
----
--

Node.js::
+
--
Use the xref:drivers::java/api-reference.adoc#_TypeDBSession_close__[close] method to explicitly close a session:

.Close a session
[,js]
----
session.close();
----
--

C++::
+
--
A session is automatically closed when the variable containing it is dropped from memory.

To explicitly close a session,
use the xref:drivers::java/api-reference.adoc#_TypeDBSession_close__[close] method:

.Close a session
[,cpp]
----
session.close();
----
--
====

== Session management
//best practices?

Any TypeDB Client automatically exchanges internal signals with TypeDB server to keep a session alive when itâ€™s open.
If server doesn't receive this signal for a period of time bigger than the timeout (by default, 30 secs)
it forcibly closes the session due to inactivity.

Only one Schema session can be open at any time.
An open Schema session blocks all attempt to open a `write` transaction in any `data` session.
For more information on these limitations, see the
xref:home::acid.adoc#_schema_integrity[Schema integrity enforcement] section on the xref:home::acid.adoc[] page.

It is recommended to avoid long-running sessions because of possible network failures.
A good principle to follow is for logically coherent transactions to be grouped into a session.

== Learn more

[cols-2]
--
.xref:manual::connecting/transaction.adoc[]
[.clickable]
****
See how to manage transactions in TypeDB.
****

.xref:manual::defining/overview.adoc[]
[.clickable]
****
See how to define a schema for your database.
****
--
