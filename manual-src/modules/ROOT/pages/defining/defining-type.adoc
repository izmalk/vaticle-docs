= Defining types
:tabs-sync-option:
:experimental:

This page covers defining types in a schema of a database with Studio, Console, or one of the drivers.
Make sure to xref:manual::installing/overview.adoc[install] and
xref:manual::connecting/connection.adoc[connect] with your chosen client/driver first.

Every TypeDB database has a schema that contains definitions of all types used in that database.
Types represent a data model of a database and define what is possible/permitted.
Everything not defined in a schema is considered as impossible or restricted in a database.

A type can be added by subtyping any existing type from a schema and inheriting its features.
All types of a schema form a type hierarchy growing out of three root types: `entity`, `relation`, `attribute`.

Every type can have only one parent type (or supertype),
hence all types can be classified into three distinct categories by their root type:
entity types, relation types, and attribute types.
Data can be inserted into TypeDB database only as instances of types from its schema:
entities, relations, and attributes.

== Defining entity types

Entity types represent a classification of independent objects in our data model.
Every instance of an entity type can exist independently of other instances of data in a database.

To create a new entity type, we can subtype the `entity` root type or any other entity type.
Use a Define query with the `sub` keyword to subtype an existing type, for example:

[tabs]
====
Studio::
+
--
. xref:manual::connecting/database.adoc[Create] a new database.
Select the new database with a drop-down list in the top toolbar.
. Switch to `schema` session and `write` transaction types.
. Open a new tab and copy the following query:
+
.TypeQL Define query
[,typeql]
----
define user sub entity;
----
. Run the query by clicking the btn:[Run query] button (image:home::studio-icons/run.png[run]).
. Commit the changes by clicking the btn:[Commit query] button (image:home::studio-icons/commit.png[Commit]).
--

Console::
+
--
. Create a new database:
+
[,bash]
----
database create db2
----
. Open a session and transaction:
+
[,bash]
----
transaction db2 schema write
----
. Send the Define query:
+
[,bash]
----
define user sub entity;
----
+
Push btn:[Enter] twice to send the query.
. Commit the changes:
+
[,bash]
----
commit
----
////
[,bash]
----
typedb console --command="database create db2" \
--command="transaction db2 schema write" \
--command="define user sub entity;" \
--command="commit"
----
////
--
====

To create a new entity type programmatically, use xref:manual::installing/drivers.adoc[drivers]:

[tabs]
====
Rust::
+
--
[,rust]
----
let query = "define user sub entity;";
let databases = DatabaseManager::new(driver);
databases.create("db2")?;
let db = databases.get("db2")?;
let session = Session::new(db, SessionType::Schema)?;
let tx = session.transaction(TransactionType::Write)?;
tx.query().define(&query).resolve()?;
tx.commit().resolve()?;
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Python::
+
--
[,python]
----
driver.databases.create("db2")
with driver.session("db2", SessionType.SCHEMA) as session:
    with session.transaction(TransactionType.WRITE) as transaction:
        transaction.query.define("define user sub entity;")
        transaction.commit()
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Java::
+
--
[,java]
----
driver.databases().create("db2");
try (TypeDBSession session = driver.session("db2", TypeDBSession.Type.SCHEMA)) {
    try (TypeDBTransaction Transaction = session.transaction(TypeDBTransaction.Type.WRITE)) {
        Transaction.query().define("define user sub entity;");
        Transaction.commit();
    }
}
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Node.js::
+
--
[,js]
----
await driver.databases.create("db2");
session = await driver.session("db2", SessionType.SCHEMA);
transaction = await session.transaction(TransactionType.WRITE);
await transaction.query.define("define user sub entity;");
await transaction.commit();
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

C++::
+
--
[,cpp]
----
driver.databases.create("db2");
TypeDB::Options options;
    {
        auto session = driver.session("db2", TypeDB::SessionType::SCHEMA, options);
        auto tx = session.transaction(TypeDB::TransactionType::WRITE, options);
        tx.query.define("define user sub entity;", options).get();
        tx.commit();
    }
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--
====

== Defining attribute types

Attribute types represent primitive values stored in a database.
The type of values stored by an attribute type is defined by its value type.

To create a new attribute type, we can subtype the `attribute` root type or any other attribute type.
A new attribute type must have the same value type as its parent, but `attribute` root type is universal --
it doesn't have a value type and can be subtyped by any.
Use a Define query with the `sub` keyword to subtype an existing attribute type,
and `value` keyword to set its value type, for example:

[tabs]
====
Studio::
+
--
. Select the new database with a drop-down list in the top toolbar.
. Switch to `schema` session and `write` transaction types.
. Open a new tab and copy the following query:
+
.TypeQL Define query
[,typeql]
----
define email sub attribute, value string;
----
. Run the query by clicking the btn:[Run query] button (image:home::studio-icons/run.png[run]).
. Commit the changes by clicking the btn:[Commit query] button (image:home::studio-icons/commit.png[Commit]).
--

Console::
+
--
. Open a session and transaction:
+
[,bash]
----
transaction db2 schema write
----
. Send the Define query:
+
[,bash]
----
define email sub attribute, value string;
----
+
Push btn:[Enter] twice to send the query.
. Commit the changes:
+
[,bash]
----
commit
----
////
[,bash]
----
typedb console --command="database create db2" \
--command="transaction db2 schema write" \
--command="define user sub entity;" \
--command="commit"
----
////
--
====

To create a new attribute type programmatically, use xref:manual::installing/drivers.adoc[drivers]:

[tabs]
====
Rust::
+
--
[,rust]
----
let query = "define email sub attribute, value string;";
let databases = DatabaseManager::new(driver);
let db = databases.get("db2")?;
let session = Session::new(db, SessionType::Schema)?;
let tx = session.transaction(TransactionType::Write)?;
tx.query().define(&query).resolve()?;
tx.commit().resolve()?;
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Python::
+
--
[,python]
----
with driver.session("db2", SessionType.SCHEMA) as session:
    with session.transaction(TransactionType.WRITE) as transaction:
        transaction.query.define("define email sub attribute, value string;")
        transaction.commit()
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Java::
+
--
[,java]
----
try (TypeDBSession session = driver.session("db2", TypeDBSession.Type.SCHEMA)) {
    try (TypeDBTransaction Transaction = session.transaction(TypeDBTransaction.Type.WRITE)) {
        Transaction.query().define("define email sub attribute, value string;");
        Transaction.commit();
    }
}
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Node.js::
+
--
[,js]
----
session = await driver.session("db2", SessionType.SCHEMA);
transaction = await session.transaction(TransactionType.WRITE);
await transaction.query.define("define email sub attribute, value string;");
await transaction.commit();
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

C++::
+
--
[,cpp]
----
TypeDB::Options options;
    {
        auto session = driver.session("db2", TypeDB::SessionType::SCHEMA, options);
        auto tx = session.transaction(TypeDB::TransactionType::WRITE, options);
        tx.query.define("define user sub entity;", options).get();
        tx.commit();
    }
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--
====

=== Ownership

Attributes can be owned by other instances of data.
To be able to do that, an ability to own the attribute's type must be defined in a schema for the owner's type:

[tabs]
====
Studio::
+
--
. Select the new database with a drop-down list in the top toolbar.
. Switch to `schema` session and `write` transaction types.
. Open a new tab and copy the following query:
+
.TypeQL Define query
[,typeql]
----
define user owns email;
----
. Run the query by clicking the btn:[Run query] button (image:home::studio-icons/run.png[run]).
. Commit the changes by clicking the btn:[Commit query] button (image:home::studio-icons/commit.png[Commit]).
--

Console::
+
--
. Open a session and transaction:
+
[,bash]
----
transaction db2 schema write
----
. Send the Define query:
+
[,bash]
----
define user owns email;
----
+
Push btn:[Enter] twice to send the query.
. Commit the changes:
+
[,bash]
----
commit
----
--
====

To create a new attribute type programmatically, use xref:manual::installing/drivers.adoc[drivers]:

[tabs]
====
Rust::
+
--
[,rust]
----
let query = "define user owns email;";
let databases = DatabaseManager::new(driver);
let db = databases.get("db2")?;
let session = Session::new(db, SessionType::Schema)?;
let tx = session.transaction(TransactionType::Write)?;
tx.query().define(&query).resolve()?;
tx.commit().resolve()?;
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Python::
+
--
[,python]
----
with driver.session("db2", SessionType.SCHEMA) as session:
    with session.transaction(TransactionType.WRITE) as transaction:
        transaction.query.define("define user owns email;")
        transaction.commit()
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Java::
+
--
[,java]
----
try (TypeDBSession session = driver.session("db2", TypeDBSession.Type.SCHEMA)) {
    try (TypeDBTransaction Transaction = session.transaction(TypeDBTransaction.Type.WRITE)) {
        Transaction.query().define("define user owns email;");
        Transaction.commit();
    }
}
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Node.js::
+
--
[,js]
----
session = await driver.session("db2", SessionType.SCHEMA);
transaction = await session.transaction(TransactionType.WRITE);
await transaction.query.define("define user owns email;");
await transaction.commit();
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

C++::
+
--
[,cpp]
----
TypeDB::Options options;
    {
        auto session = driver.session("db2", TypeDB::SessionType::SCHEMA, options);
        auto tx = session.transaction(TypeDB::TransactionType::WRITE, options);
        tx.query.define("define user sub entity;", options).get();
        tx.commit();
    }
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--
====

== Defining relation types

Relation types represent relations between instances in a database.
Every relation type has at least one role.

To create a new relation type, we can subtype the `relation` root type or any other relation type.
A new relation type inherits all roles from its parent type, but it can override them and add new roles.
Use a Define query with the `sub` keyword to subtype an existing relation type,
and the `relates` keyword to add a role to it, for example:

[tabs]
====
Studio::
+
--
. Select the new database with a drop-down list in the top toolbar.
. Switch to `schema` session and `write` transaction types.
. Open a new tab and copy the following query:
+
.TypeQL Define query
[,typeql]
----
define friendship sub relation, relates friend;
----
. Run the query by clicking the btn:[Run query] button (image:home::studio-icons/run.png[run]).
. Commit the changes by clicking the btn:[Commit query] button (image:home::studio-icons/commit.png[Commit]).
--

Console::
+
--
. Open a session and transaction:
+
[,bash]
----
transaction db2 schema write
----
. Send the Define query:
+
[,bash]
----
define friendship sub relation, relates friend;
----
+
Push btn:[Enter] twice to send the query.
. Commit the changes:
+
[,bash]
----
commit
----
////
[,bash]
----
typedb console --command="database create db2" \
--command="transaction db2 schema write" \
--command="define user sub entity;" \
--command="commit"
----
////
--
====

To create a new attribute type programmatically, use xref:manual::installing/drivers.adoc[drivers]:

[tabs]
====
Rust::
+
--
[,rust]
----
let query = "define friendship sub relation, relates friend;";
let databases = DatabaseManager::new(driver);
let db = databases.get("db2")?;
let session = Session::new(db, SessionType::Schema)?;
let tx = session.transaction(TransactionType::Write)?;
tx.query().define(&query).resolve()?;
tx.commit().resolve()?;
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Python::
+
--
[,python]
----
with driver.session("db2", SessionType.SCHEMA) as session:
    with session.transaction(TransactionType.WRITE) as transaction:
        transaction.query.define("define friendship sub relation, relates friend;")
        transaction.commit()
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Java::
+
--
[,java]
----
try (TypeDBSession session = driver.session("db2", TypeDBSession.Type.SCHEMA)) {
    try (TypeDBTransaction Transaction = session.transaction(TypeDBTransaction.Type.WRITE)) {
        Transaction.query().define("define friendship sub relation, relates friend;");
        Transaction.commit();
    }
}
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Node.js::
+
--
[,js]
----
session = await driver.session("db2", SessionType.SCHEMA);
transaction = await session.transaction(TransactionType.WRITE);
await transaction.query.define("define friendship sub relation, relates friend;");
await transaction.commit();
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

C++::
+
--
[,cpp]
----
TypeDB::Options options;
    {
        auto session = driver.session("db2", TypeDB::SessionType::SCHEMA, options);
        auto tx = session.transaction(TypeDB::TransactionType::WRITE, options);
        tx.query.define("define friendship sub relation, relates friend;", options).get();
        tx.commit();
    }
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--
====

=== Playing a role

Other instances can play a role of a relation.
To be able to do that, an ability to play the role must be defined in a schema for the type of the instance.

[tabs]
====
Studio::
+
--
. Select the new database with a drop-down list in the top toolbar.
. Switch to `schema` session and `write` transaction types.
. Open a new tab and copy the following query:
+
.TypeQL Define query
[,typeql]
----
define user plays friendship:friend;
----
. Run the query by clicking the btn:[Run query] button (image:home::studio-icons/run.png[run]).
. Commit the changes by clicking the btn:[Commit query] button (image:home::studio-icons/commit.png[Commit]).
--

Console::
+
--
. Open a session and transaction:
+
[,bash]
----
transaction db2 schema write
----
. Send the Define query:
+
[,bash]
----
define user plays friendship:friend;
----
+
Push btn:[Enter] twice to send the query.
. Commit the changes:
+
[,bash]
----
commit
----
--
====

To create a new attribute type programmatically, use xref:manual::installing/drivers.adoc[drivers]:

[tabs]
====
Rust::
+
--
[,rust]
----
let query = "define user plays friendship:friend;";
let databases = DatabaseManager::new(driver);
let db = databases.get("db2")?;
let session = Session::new(db, SessionType::Schema)?;
let tx = session.transaction(TransactionType::Write)?;
tx.query().define(&query).resolve()?;
tx.commit().resolve()?;
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Python::
+
--
[,python]
----
with driver.session("db2", SessionType.SCHEMA) as session:
    with session.transaction(TransactionType.WRITE) as transaction:
        transaction.query.define("define user plays friendship:friend;")
        transaction.commit()
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Java::
+
--
[,java]
----
try (TypeDBSession session = driver.session("db2", TypeDBSession.Type.SCHEMA)) {
    try (TypeDBTransaction Transaction = session.transaction(TypeDBTransaction.Type.WRITE)) {
        Transaction.query().define("define user plays friendship:friend;");
        Transaction.commit();
    }
}
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

Node.js::
+
--
[,js]
----
session = await driver.session("db2", SessionType.SCHEMA);
transaction = await session.transaction(TransactionType.WRITE);
await transaction.query.define("define user plays friendship:friend;");
await transaction.commit();
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--

C++::
+
--
[,cpp]
----
TypeDB::Options options;
    {
        auto session = driver.session("db2", TypeDB::SessionType::SCHEMA, options);
        auto tx = session.transaction(TypeDB::TransactionType::WRITE, options);
        tx.query.define("define user plays friendship:friend;", options).get();
        tx.commit();
    }
----

Where `driver` is an instance of a driver, xref:manual::connecting/connection.adoc[connected] to TypeDB.
--
====

== Full schema

We can combine all schema statements from this page to get the following resulted TypeQL Define query:

[,typeql]
----
define

email sub attribute, value string;
friendship sub relation, relates friend;
user sub entity,
    owns email,
    plays friendship:friend;
----
