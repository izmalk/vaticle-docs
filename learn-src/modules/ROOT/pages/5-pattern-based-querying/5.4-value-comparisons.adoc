= 5.4 - Value comparisons

== Comparison operators

TypeQL currently provides six general-purpose operators for comparing the values of attributes and literals in patterns:

* `==`
* `!=`
* `>`
* `>=`
* `<`
* `\<=`

Two additional operators are provided for string comparisons:

* `contains`
* `like`

== Numeric comparisons

All the general-purpose comparison operators are valid for longs, doubles, and datetimes. The following patterns illustrate some examples.

[,typeql]
----
(rater: $user, rated: $book) isa rating, has score >= 8;
----

[,typeql]
----
$book-1 has page-count $count-1;
$book-2 has page-count $count-2;
$count-1 == $count-2;
----

[,typeql]
----
(buyer: $user) isa order, has timestamp $time;
(subject: $user) isa login, has timestamp > $time;
----

== String comparisons

For strings, all the general-purpose comparison operators are valid, and function according to the https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#compareTo(java.lang.String)[Java string specification]:

* If two strings have the same length and the characters at each index are the same, then they are equal.
* If they have different characters at one or more index positions, then the lesser string is the one with the lower https://en.wikipedia.org/wiki/List_of_Unicode_characters[Unicode value] at the first of those indices.
* If they are different lengths but there is no index at which they differ, then the lesser string is the shorter one.

The following pattern would match any book that has a title starting with a letter between "H" and "Z":

[,typeql]
----
$book isa book, has title >= "H";
----

Of course, this does make the assumption that all book titles start with upper case letters. For more semantically robust matching, we can use the `contains` or `like` operators. The `contains` operator checks if one string contains another in a case-insensitive manner. For example, the following pattern would match the book "The Motorcycle Diaries".

[,typeql]
----
$book isa book, has title contains "motor";
----


[WARNING]
====
For non-Latin characters, the case insensitivity of the `contains` operator can result in https://en.wikipedia.org/wiki/Dotted_and_dotless_I_in_computing[unexpected behaviour].
====

Finally, the `like` operator can be used to match string according to https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Pattern.html[Java regex patterns], as in the following example, which matches any book that has "TypeDB" in the title.

[,typeql]
----
$book isa book, has title like ".*TypeDB.*";
----

== Boolean comparisons

For booleans, all the general-purpose operators are valid, but only the `==` and `!=` operators have significant meaning. The following pattern illustrates an example.

[,typeql]
----
(subject: $user) isa login, has success $success;
$success == true;
----

For the remaining operators, `true` is taken to be greater than `false`.
