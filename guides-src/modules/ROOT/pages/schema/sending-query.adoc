= Sending a schema query
:experimental:

This guide covers sending a query in a schema session and write transaction with TypeDB Studio, Console, or drivers.
Make sure the selected client is xref:guides::installation/overview.adoc[installed].

== Query execution workflow

To send a schema query, we need to open a `schema` session to an existing database, and then open a `write` transaction.
After successful execution of the query, the transaction must be committed to persist the changes made to the schema.
See the full process outline below.

. Establish network connection to TypeDB. See the xref:guides::connection/overview.adoc[] section.
. Open a `schema` session.
. Open a `write` transaction.
. Send a query for execution.
. Commit changes.
. Close the session.

For more information on how to create a new database, see the xref:guides::database/overview.adoc[] section.

== How to send a schema query

The following instructions are written with the assumption that a connection to TypeDB is already established.
For a connection guide, see the xref:guides::connection/overview.adoc[] section.

[tabs]
====
Studio::
+
--
. Select a database from a drop-down list in the top toolbar next to the database icon
image:home::studio-icons/database.png[].
. Switch to the `schema` session and `write` transaction types in the top toolbar.
. Open a `.tql` file with a schema query to run or copy-paste a Define query to a new tab of the text editor panel.
. Execute the query by clicking on the btn:[Run Query] (image:home::studio-icons/run.png[]) button.
. Commit the changes with the btn:[Commit transaction] (image:home::studio-icons/commit.png[]) button.
--

Console::
+
--
. Open a `schema` session and `write` transaction to a database, for example:
+
[,bash]
----
transaction db1 schema write
----
+
Where `db1` is the name of the database selected.
. Copy-paste a Define query to the terminal and push btn:[Enter] *twice*.
. Commit the changes made in the transaction:
+
[,bash]
----
commit
----
--

Rust::
+
--
.Define schema query
[,rust]
----

let typeql_define_query = "define
                        credential sub attribute, value string;
                        full-name sub attribute, value string;
                        subject sub entity,
                            abstract,
                            owns credential;
                        user sub subject;
                        person sub user, owns full-name;";
tx.query().define(&typeql_define_query).resolve()?;
tx.commit().resolve()?;
----
//#todo Add session and transaction management?
--

Python::
+
--
.Define schema query
[,python]
----
typeql_define_query = "define" \
                    "credential sub attribute, value string; " \
                    "full-name sub attribute, value string; " \
                    "subject sub entity," \
                    "    abstract," \
                    "    owns credential;" \
                    "user sub subject;" \
                    "person sub user, owns full-name;"
transaction.query.define(typeql_define_query)
transaction.commit()
----
--

Java::
+
--
.Define schema query
[,java]
----
String typeqlDefineQuery = """
                        define
                        credential sub attribute, value string;
                        full-name sub attribute, value string;
                        subject sub entity,
                            abstract,
                            owns credential;
                        user sub subject;
                        person sub user, owns full-name;
                        """;
writeTransaction.query().define(typeqlDefineQuery);
writeTransaction.commit();
----
--

Node.js::
+
--
.Define schema query
[,js]
----
const typeql_define_query = `define
                            credential sub attribute, value string;
                            full-name sub attribute, value string;
                            subject sub entity,
                                abstract,
                                owns credential;
                            user sub subject;
                            person sub user, owns full-name;
                            `;
await transaction.query.define(typeql_define_query);
await transaction.commit();
----
--
====

== Transaction control




== Learn more

After you have defined a schema, you can use
xref:guides::data/overview.adoc[] queries.

If you don't have your own schema ready yet, feel free to use the
https://github.com/vaticle/typedb-docs/blob/master/typedb-src/modules/ROOT/attachments/iam-schema.tql[IAM schema,window=_blank].
For more information about the IAM schema, see the xref:typedb::tutorials/iam-schema.adoc[] page.